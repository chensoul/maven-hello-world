<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0-M16 from src/site/markdown/index.md.vm at 2024-01-09
 | Rendered using Apache Maven Fluido Skin 1.11.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0-M16" />
    <title>maven-hello-world â€“ Maven Hello World</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.11.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.11.1.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"></div>
          <div class="pull-right"><a href="./" id="bannerRight"><h1>maven-hello-world</h1>
</a></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2024-01-09<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.0.34-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-down"></span>Project Information</a>
     <ul class="nav nav-list">
      <li><a href="ci-management.html" title="CI Management"><span class="none"></span>CI Management</a></li>
      <li><a href="dependencies.html" title="Dependencies"><span class="none"></span>Dependencies</a></li>
      <li><a href="dependency-info.html" title="Dependency Information"><span class="none"></span>Dependency Information</a></li>
      <li><a href="distribution-management.html" title="Distribution Management"><span class="none"></span>Distribution Management</a></li>
      <li class="active"><a><span class="none"></span>About</a></li>
      <li><a href="issue-management.html" title="Issue Management"><span class="none"></span>Issue Management</a></li>
      <li><a href="licenses.html" title="Licenses"><span class="none"></span>Licenses</a></li>
      <li><a href="plugin-management.html" title="Plugin Management"><span class="none"></span>Plugin Management</a></li>
      <li><a href="plugins.html" title="Plugins"><span class="none"></span>Plugins</a></li>
      <li><a href="scm.html" title="Source Code Management"><span class="none"></span>Source Code Management</a></li>
      <li><a href="summary.html" title="Summary"><span class="none"></span>Summary</a></li>
      <li><a href="team.html" title="Team"><span class="none"></span>Team</a></li>
     </ul></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<section>
<h1>Maven Hello World</h1>
<p>Getting started with Maven Release Plugin and Github Action</p><section>
<h2>Links</h2>
<p>Login to your <a href="https://s01.oss.sonatype.org/" class="externalLink">sonatype</a> account to release the version</p>
<table class="table table-striped">
<thead>
<tr class="a">
<th>Type</th>
<th>URL</th>
<th>Description</th></tr></thead><tbody>
<tr class="b">
<td>Snapshot</td>
<td><a href="https://s01.oss.sonatype.org/content/repositories/snapshots/com/chensoul/maven-hello-world/" class="externalLink">sonatype</a></td>
<td>Sonatype Snapshot versions</td></tr>
<tr class="a">
<td>Release</td>
<td><a href="https://repo.maven.apache.org/maven2/com/chensoul/maven-hello-world/" class="externalLink">maven</a></td>
<td>Maven Release versions</td></tr>
<tr class="b">
<td>Release</td>
<td><a href="https://central.sonatype.com/artifact/com.chensoul/maven-hello-world/" class="externalLink">central-sonatype</a></td>
<td>Sonatype Release versions</td></tr></tbody>
</table>
</section><section>
<h2>Documentation</h2>
<ul>

<li>Well explained blog
of <a href="https://dzone.com/articles/how-to-publish-artifacts-to-maven-central" class="externalLink">How to Publish Artifacts to Maven Central</a></li>
<li>Your Sonatype account <a href="https://s01.oss.sonatype.org/" class="externalLink">link</a></li>
<li>Your Jira ticket login <a href="https://issues.sonatype.org/" class="externalLink">link</a></li>
<li>Github action to import gpg:
<ul>

<li><a href="https://github.com/actions/setup-java/blob/ddb82ce8a6ecf5ac3e80c3184839e6661546e4aa/docs/advanced-usage.md?plain=1#L315" class="externalLink">link1</a></li>
<li><a href="https://github.com/hashicorp/ghaction-import-gpg" class="externalLink">link2</a></li>
<li><a href="https://github.com/crazy-max/ghaction-import-gpg/tree/master" class="externalLink">link3</a></li>
</ul></li>
</ul></section><section>
<h2>Secrets</h2>
<ul>

<li><strong>MAVEN_GPG_PRIVATE_KEY</strong> - Take it from the private.gpg</li>
<li><strong>OSSRH_USERNAME</strong> - Created <a href="https://issues.sonatype.org/" class="externalLink">here</a></li>
<li><strong>OSSRH_TOKEN</strong> - Created <a href="https://issues.sonatype.org/" class="externalLink">here</a></li>
<li><strong>MAVEN_GPG_PASSPHRASE</strong> - Create <a href="https://central.sonatype.org/publish/requirements/gpg/#generating-a-key-pair" class="externalLink">here</a>
<ul>

<li>This passphrase and your private key are all that is needed to sign artifacts with your signature.</li>
</ul></li>
<li><strong>GITHUB_TOKEN</strong> - Github token</li>
</ul></section><section>
<h2>Demo</h2>
<p>How do you release a version?</p>
<p>Manually:<br />
&#xa0;&#xa0;&#xa0;1. Check the version in the pom.xml<br />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;* <strong>0.0.1-SNAPSHOT</strong><br />
&#xa0;&#xa0;&#xa0;2. Go to Github action -&gt; Run workflow<br />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;* <strong>Release:</strong> 0.0.1<br />
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;* <strong>Snapshot:</strong> 0.0.2-SNAPSHOT</p>
<p>Automatically:<br />
Push to Github will create a release and a snapshot but it won't publish the release.<br />
Snapshot will be available through <a href="https://central.sonatype.com/artifact/com.chensoul/maven-hello-world/0.0.1" class="externalLink">here</a></p>

<div class="verbatim">
<pre><code class="language-bash">&lt;dependency&gt;
    &lt;groupId&gt;com.chenspoul&lt;/groupId&gt;
    &lt;artifactId&gt;maven-hello-world&lt;/artifactId&gt;
    &lt;version&gt;0.0.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre></div></section><section>
<h2>Maven in 5 Minutes</h2>
<p>Follow after the documentation <a href="https://maven.apache.org/guides/getting-started/maven-in-five-minutes.html" class="externalLink">here</a> to
start your first maven.</p>
<p>Expend your <code>./src/main/java/com/mycompany/app/App.java</code> with:</p>

<div class="verbatim">
<pre><code class="language-bash">package com.mycompany.app;

import com.sun.net.httpserver.HttpExchange;
import com.sun.net.httpserver.HttpHandler;
import com.sun.net.httpserver.HttpServer;

import java.io.IOException;
import java.io.OutputStream;
import java.net.InetSocketAddress;

public class App {
    public static void main( String[] args ) throws IOException {
        HttpServer server = HttpServer.create(new InetSocketAddress(8080), 0);
        server.createContext(&quot;/&quot;, new MyHandler());
        server.setExecutor(null); // creates a default executor
        server.start();
    }

    static class MyHandler implements HttpHandler {
        @Override
        public void handle(HttpExchange t) throws IOException {
            String response = &quot;&lt;h1&gt; Hello World! &lt;/h1&gt;&quot;;
            t.sendResponseHeaders(200, response.length());
            OutputStream os = t.getResponseBody();
            os.write(response.getBytes());
            os.close();
        }
    }
}
</code></pre></div></section><section>
<h2>GPG</h2>
<p>After generating gpg key following
by <a href="https://central.sonatype.org/publish/requirements/gpg/#generating-a-key-pair" class="externalLink">here</a></p>

<div class="verbatim">
<pre><code class="language-bash">gpg --gen-key
</code></pre></div>
<p>You can list the local key that you created:</p>

<div class="verbatim">
<pre><code class="language-bash">gpg --list-secret-keys --keyid-format=long
</code></pre></div>
<p>Then you can export the private key to your local machine in order to upload it later to Github secret:</p>

<div class="verbatim">
<pre><code class="language-bash">gpg --armor --export-secret-keys &lt;YOUR_KEY&gt; &gt; private.gpg
</code></pre></div>
<ul>

<li>YOUR_KEY=&#x2018;long number&#x2019;</li>
</ul></section><section>
<h2>Local commands</h2>
<p>Check your maven settings file <code>&#xff5e;/.m2/settings.xml</code>:</p>

<div class="verbatim">
<pre><code class="language-bash">    &lt;server&gt;
        &lt;id&gt;gpg.passphrase&lt;/id&gt;
        &lt;passphrase&gt;&lt;PASSPHRASE_GPG&gt;&lt;/passphrase&gt;
    &lt;/server&gt;
    &lt;server&gt;
        &lt;id&gt;ossrh&lt;/id&gt;
        &lt;username&gt;&lt;OSSRH_USERNAME&gt;&lt;/username&gt;
        &lt;password&gt;&lt;OSSRH_TOKEN&gt;&lt;/password&gt;
    &lt;/server&gt;
</code></pre></div>
<p>According to <a href="https://central.sonatype.org/publish/publish-maven/" class="externalLink">publish-maven</a>, you can do these as below.</p><section>
<h3>Performing a Snapshot Deployment</h3>
<p>Snapshot deployment are performed when your version ends in -SNAPSHOT . You do not need to fulfill the requirements when
performing snapshot deployments and can simply run</p>

<div class="verbatim">
<pre><code class="language-bash">mvn -B clean deploy
</code></pre></div>
<p>SNAPSHOT versions are not synchronized to the Central Repository. If you wish your users to consume your SNAPSHOT
versions, they would need to add the snapshot repository to their Nexus Repository Manager, settings.xml, or pom.xml.
Successfully deployed SNAPSHOT versions will be found in <a href="https://s01.oss.sonatype.org/content/repositories/snapshots/" class="externalLink">https://s01.oss.sonatype.org/content/repositories/snapshots/</a></p></section><section>
<h3>Performing a Release Deployment</h3>
<p>In order to perform a release deployment you have to edit your version in all your POM files to use release versions.</p>

<div class="verbatim">
<pre><code class="language-bash">mvn versions:set -DnewVersion=1.2.3 versions:commit
</code></pre></div>
<p>Install to local repository <code>~/.m2/repository</code>:</p>

<div class="verbatim">
<pre><code class="language-bash">mvn clean install
</code></pre></div>
<p>Release to the staging repositorywith the release profile:</p>

<div class="verbatim">
<pre><code class="language-bash">mvn clean deploy -P release
</code></pre></div>
<p>And then login to the staging repository <a href="https://s01.oss.sonatype.org/#stagingRepositories" class="externalLink">https://s01.oss.sonatype.org/#stagingRepositories</a> , release and drop the repository.
Wait a few minutes and then you can find the release version in <a href="https://central.sonatype.com/artifact/com.chensoul/maven-hello-world/" class="externalLink">https://central.sonatype.com/artifact/com.chensoul/maven-hello-world/</a>
or <a href="https://s01.oss.sonatype.org/service/local/repositories/releases/content/com/chensoul/maven-hello-world/" class="externalLink">https://s01.oss.sonatype.org/service/local/repositories/releases/content/com/chensoul/maven-hello-world/</a> .</p></section><section>
<h3>Manually Publish the site to github pages</h3>
<p>Publish to github pages:</p>

<div class="verbatim">
<pre><code class="language-bash">mvn clean site scm-publish:publish-scm
</code></pre></div></section></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2023&#x2013;2024
<a href="https://blog.chensoul.cc/">chensoul.cc</a>
</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>